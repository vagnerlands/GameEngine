#version 330 core

varying vec3 N;
varying vec3 pos;
varying vec2 TexCoords;

// Values that stay constant for the whole mesh.
uniform sampler2D diffuseMap;
// position of the light
uniform vec3 lightPos;

void main(void)
{
    // get diffuse color
    vec3 color = texture(diffuseMap, TexCoords).rgb;   
   
    vec3 ct,cf;
    vec4 texel;
    float intensity,at,af;
    intensity = max(dot(normalize(lightPos - pos),normalize(N)),0.0);
 
    cf = intensity * vec3(1,0,1);
    af = 1.0;
    texel = texture2D(diffuseMap,TexCoords);
 
    ct = texel.rgb;
    at = texel.a;
    gl_FragColor = vec4(ct * cf, at * af);
   
}